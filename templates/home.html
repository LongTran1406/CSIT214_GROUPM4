<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
  </head>
  <body>
    <h1>Hello, world!</h1>
    <div class="card" style="width:75%; margin:auto">
        <div class="card-header">
            <div class="d-flex flex-row">
                <button class="p-2" style="border:None" onclick="show1()">BOOK FLIGHT</button>
                <button class="p-2" style="border:None" onclick="show2()">MANAGE RESERVATION</button>
                <button class="p-2" style="border:None" onclick="show3()">CHECK-IN</button>                
            </div>
        </div>
        <div class="card-body" style="height:300px" id="body">
        </div>
    </div>
    <script>
        function show1(){
            document.getElementById("body").innerHTML = '<p>Hello1</p>';
        }
        function show2(){
            const display = 
            '<div class="d-flex flex-row">' + 
                '<div class="p-2">' + 
                    '<p>Booking number/ Reservation code</p>' + 
                    '<input type="text" id="bnumber">' + 
                '</div>' + 
                '<div class="p-2">' + 
                    '<p>Surname</p>' + 
                    '<input type="text" id="surname">' + 
                '</div>' + 
                '<button class="p-2" onclick="showBooking()">Search</button>' + 
            '</div>'
            document.getElementById("body").innerHTML = display;
        }
        function show3(){
            document.getElementById("body").innerHTML = '<p>Hello3</p>';
        }
        async function showBooking(){
            var bnumber = document.getElementById("bnumber").value;
            var surname = document.getElementById("surname").value;
            // console.log(bnumber, surname);
            const response = await fetch('/api/user_flight_search', {
                method:'POST',
                headers:{
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({bnumber, surname})
            })
            const answer = await response.json()
            console.log(answer)
            console.log(answer['airline'])
            const display = 
            '<div>' + 
                'Booking ' + answer['booking_number'] + 
            '</div>' + 
            '<div class="d-flex flex-row">' +
                '<div class="p-2">' + answer['depart_place'] + '<br/>' + answer['depart_time'] + '</div>' +
                '<div class="p-2">' + answer['arrive_place'] + '<br/>' + answer['arrive_time'] + '</div>' +
                '<div class="p-2">' + answer['airline'] + '<br/>' + answer['flight_number'] + '</div>' +
                '<div class="p-2">' + answer['fullname'] + '<br/>' + answer['passenger_num'] + answer['flight_class'] + '</div>' +
                '<a class="p-2" href=""> Edit booking </a>' +
            '</div>'
            document.getElementById("body").innerHTML += display
            console.log(display)
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
  </body>
</html>